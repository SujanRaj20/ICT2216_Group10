{% include "admin-navbar.html" %}
<div class="container-fluid page-header py-4" style="margin-top: 10px;">
    <h1 class="text-center text-white display-6">Sellers List</h1>
</div>
<div class="container-fluid py-5">
    <div class="container py-5">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Image</th>
              <th scope="col">ID</th>
              <th scope="col">Title</th>
              <th scope="col">Description</th>
              <th scope="col">Keywords</th>
              <th scope="col">Release Date</th>
              <th scope="col">Author</th>
              <th scope="col">Publisher</th>
              <th scope="col">Price</th>
              <th scope="col">Stock</th>
              <th scope="col">Type</th>
              <th scope="col">Seller ID</th>
              <th scope="col">Created At</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody>
            {% for listing in listings %}
            <tr>
                <th scope="row">
                    <div class="d-flex align-items-center">
                      <img
                        src="{{ listing.imagepath[4:] }}"
                        class="img-fluid me-5 rounded-circle"
                        style="width: 80px; height: 80px"
                        alt=""
                      />
                    </div>
                  </th>
              <td>
                <p class="mb-0 mt-4">{{ listing.id }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.title }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.description }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.keywords }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.release_date }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.author }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.publisher }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.price }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.stock }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.type }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.seller_id }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ listing.created_at }}</p>
              </td>
              <td>
                <button
                class="btn btn-md rounded-circle bg-light border mt-4" onclick="confirmDelete('{{listing.id}}')">
                <i class="fa fa-trash text-danger"></i>
              </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>

    function confirmDelete(listingId) {
        if (confirm("Are you sure you want to delete this listing?")) {
            deleteItem(listingId);
        }
    }
 
    function deleteItem(listingId) {
      $.ajax({
        url: `/admin/listingdelete/${listingId}`,
        type: "POST",
        success: function (response) {
          window.location.reload();
        },
        error: function (xhr) {
          alert("An error occurred while deleting the item.");
        },
      });
    }
  </script>

{% include "admin-footer.html" %}


