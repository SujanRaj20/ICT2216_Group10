{% include "admin-templates/admin-navbar.html" %}
{% block title %}Buyers{% endblock %}
<div class="container-fluid page-header py-4" style="margin-top: 10px;">
    <h1 class="text-center text-white display-6">Buyers List</h1>
</div>

<div class="container-fluid py-5">
    <div class="container py-5">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Username</th>
              <th scope="col">Name</th>
              <th scope="col">Email</th>
              <th scope="col">Phone Number</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody>
            {% for buyer in buyers %}
            <tr>
              <td>
                <p class="mb-0 mt-4">{{ buyer.id }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ buyer.username }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ buyer.fname }} {{ buyer.lname }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ buyer.email }}</p>
              </td>
              <td>
                <p class="mb-0 mt-4">{{ buyer.phone_num }}</p>
              </td>
              <td>
                <button
                class="btn btn-md rounded-circle bg-light border mt-4" onclick="confirmDelete('{{buyer.id}}')">
                <i class="fa fa-trash text-danger"></i>
              </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>

    function confirmDelete(buyerId) {
        if (confirm("Are you sure you want to delete this buyer?")) {
            deleteItem(buyerId);
        }
    }
 
    function deleteItem(buyerId) {
      $.ajax({
        url: `/admin/buyeraccountdelete/${buyerId}`,
        type: "POST",
        success: function (response) {
          window.location.reload();
        },
        error: function (xhr) {
          alert("An error occurred while deleting the item.");
        },
      });
    }
  </script>

{% include "admin-templates/admin-footer.html" %}


